<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Concurrency Issues Summary</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <style>

    body{font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#ffffff; color:#222; padding:28px;}
    .container{max-width:1200px;margin:0 auto}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    p.lead{margin:6px 0 0;color:#555;font-size:13px}
    .card{background:#fff;border-radius:12px;padding:18px;box-shadow:0 2px 8px rgba(0,0,0,0.1);border:1px solid #ddd}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .controls input[type="search"]{padding:8px 12px;border-radius:8px;border:1px solid #ccc;color:#222;width:28%;}
    .controls button{padding:8px 12px;border-radius:8px;border:1px solid #ccc;background:#f0f0f0;color:#000;cursor:pointer}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    thead th{position:sticky;top:0;background:#f8f8f8;padding:10px;text-align:left;font-size:13px;border-bottom:1px solid #ddd}
    th.sortable{cursor:pointer}
    tbody td{padding:10px;font-size:13px;border-bottom:1px solid #eee}
    tbody tr:nth-child(odd){background:#fff}
    tbody tr:nth-child(even){background:#f9f9f9}
    tfoot td{font-weight:700;padding:10px;border-top:2px solid #ccc;background:#f0f0f0}
    .muted{color:#777;font-size:12px}
    .chart-wrap{margin-top:18px}
    @media (max-width:820px){ thead{display:none} table, tbody, tr, td{display:block;width:100%} tr{margin-bottom:10px} td{padding:8px;position:relative} td::before{content:attr(data-label);display:block;font-weight:600;color:#555;margin-bottom:6px} tfoot td{display:block} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>CONCUR â€” JPF Report in Pass@1</h1>
        <p class="lead">Summary of Errors in Generated Code (Pass@1) - Compilation Errors and JPF Errors</p>
      </div>
      <a href="./leaderboard.html" class="muted">CONCUR</a>
    </header>

    <section class="card">
      <div class="controls">
        <input id="search" type="search" placeholder="Search model name (e.g. gpt-5)" />

        <button id="toggleChart">Toggle Chart / Table</button>
      </div>

      <div id="tableWrap">
        <table id="dataTable" aria-label="Concurrency summary table">
          <thead>
            <tr>
              <th class="sortable" data-key="Model">Model</th>
              <th class="sortable" data-key="CompilationErrors">Compilation Errors</th>
              <th class="sortable" data-key="Deadlock">DL (Deadlock)</th>
              <th class="sortable" data-key="RaceCondition">RC (Race Condition)</th>
              <th class="sortable" data-key="Starvation">SV (Starvation)</th>
              <th class="sortable" data-key="RuntimeException">UE (Uncaught Exception)</th>
              <th class="sortable" data-key="NoEntryMethod">NEM (No Entry Method)</th>
              <th class="sortable" data-key="SingleThread">ST (Single Thread)</th>
              <th class="sortable" data-key="TerminationError">TE (Termination Error)</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
          <tfoot>
            <tr id="totalsRow"></tr>
          </tfoot>
        </table>
      </div>

      <div id="chartWrap" class="chart-wrap" style="display:none">
        <canvas id="stackedChart" height="500"></canvas>
      </div>
    </section>

    <footer style="margin-top:14px;color:#777;font-size:13px">Tip: Upload this file to your repository and enable GitHub Pages to publish it.</footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script>
    const rows = [
      {Model:'claude-opus-4-1', CompilationErrors:0, Deadlock:1, RaceCondition:1, Starvation:0, RuntimeException:14, NoEntryMethod:0, SingleThread:1, TerminationError:0},
      {Model:'codellama:34b', CompilationErrors:35, Deadlock:1, RaceCondition:0, Starvation:0, RuntimeException:1, NoEntryMethod:6, SingleThread:1, TerminationError:0},
      {Model:'codeqwen:7b', CompilationErrors:26, Deadlock:2, RaceCondition:2, Starvation:0, RuntimeException:3, NoEntryMethod:4, SingleThread:1, TerminationError:0},
      {Model:'codestral:22b', CompilationErrors:16, Deadlock:1, RaceCondition:3, Starvation:0, RuntimeException:2, NoEntryMethod:2, SingleThread:1, TerminationError:3},
      {Model:'deepseek-r1:32b', CompilationErrors:18, Deadlock:0, RaceCondition:4, Starvation:0, RuntimeException:3, NoEntryMethod:0, SingleThread:1, TerminationError:6},
      {Model:'dolphin3:8b', CompilationErrors:25, Deadlock:3, RaceCondition:3, Starvation:0, RuntimeException:1, NoEntryMethod:0, SingleThread:1, TerminationError:1},
      {Model:'gemma2:27b', CompilationErrors:22, Deadlock:1, RaceCondition:2, Starvation:0, RuntimeException:5, NoEntryMethod:0, SingleThread:2, TerminationError:1},
      {Model:'gpt-4o', CompilationErrors:6, Deadlock:1, RaceCondition:4, Starvation:0, RuntimeException:9, NoEntryMethod:0, SingleThread:1, TerminationError:0},
      {Model:'gpt-5', CompilationErrors:4, Deadlock:1, RaceCondition:2, Starvation:0, RuntimeException:4, NoEntryMethod:0, SingleThread:1, TerminationError:1},
      {Model:'llama3.3:70b', CompilationErrors:15, Deadlock:1, RaceCondition:2, Starvation:0, RuntimeException:2, NoEntryMethod:1, SingleThread:1, TerminationError:2},
      {Model:'llava:34b', CompilationErrors:37, Deadlock:0, RaceCondition:1, Starvation:0, RuntimeException:0, NoEntryMethod:0, SingleThread:0, TerminationError:1},
      {Model:'magicoder:7b', CompilationErrors:28, Deadlock:2, RaceCondition:0, Starvation:0, RuntimeException:0, NoEntryMethod:2, SingleThread:2, TerminationError:2},
      {Model:'mistral:7b', CompilationErrors:34, Deadlock:0, RaceCondition:1, Starvation:0, RuntimeException:3, NoEntryMethod:1, SingleThread:1, TerminationError:2},
      {Model:'mixtral:8x7b', CompilationErrors:18, Deadlock:0, RaceCondition:0, Starvation:0, RuntimeException:4, NoEntryMethod:0, SingleThread:3, TerminationError:8},
      {Model:'opencoder:8b', CompilationErrors:18, Deadlock:2, RaceCondition:2, Starvation:0, RuntimeException:1, NoEntryMethod:1, SingleThread:0, TerminationError:4},
      {Model:'phi4:14b', CompilationErrors:17, Deadlock:2, RaceCondition:4, Starvation:0, RuntimeException:1, NoEntryMethod:0, SingleThread:1, TerminationError:0},
      {Model:'phind-codellama:34b', CompilationErrors:19, Deadlock:0, RaceCondition:1, Starvation:0, RuntimeException:5, NoEntryMethod:2, SingleThread:3, TerminationError:3},
      {Model:'qwen3:32b', CompilationErrors:10, Deadlock:0, RaceCondition:3, Starvation:0, RuntimeException:1, NoEntryMethod:0, SingleThread:1, TerminationError:11},
      {Model:'starcoder2:15b', CompilationErrors:28, Deadlock:0, RaceCondition:0, Starvation:0, RuntimeException:0, NoEntryMethod:2, SingleThread:7, TerminationError:0},
      {Model:'vicuna:33b', CompilationErrors:35, Deadlock:0, RaceCondition:0, Starvation:0, RuntimeException:1, NoEntryMethod:1, SingleThread:1, TerminationError:1},
      {Model:'wizardcoder:33b', CompilationErrors:13, Deadlock:2, RaceCondition:1, Starvation:0, RuntimeException:6, NoEntryMethod:0, SingleThread:2, TerminationError:5},
      {Model:'zephyr:7b', CompilationErrors:40, Deadlock:0, RaceCondition:0, Starvation:0, RuntimeException:1, NoEntryMethod:0, SingleThread:0, TerminationError:0},
    ];

    const totals = {CompilationErrors:464, Deadlock:20, RaceCondition:36, Starvation:0, RuntimeException:67, NoEntryMethod:22, SingleThread:32, TerminationError:51};

    const tbody = document.getElementById('tbody');

    function renderRows(filterText = '', sortKey = null, sortDesc = false){
      tbody.innerHTML = '';
      let data = rows.filter(r => r.Model.toLowerCase().includes(filterText.toLowerCase()));

      if(sortKey){
        data.sort((a,b)=>{
          const va = (typeof a[sortKey]==='string')?a[sortKey].toLowerCase():a[sortKey];
          const vb = (typeof b[sortKey]==='string')?b[sortKey].toLowerCase():b[sortKey];
          if(va<vb) return sortDesc?1:-1;
          if(va>vb) return sortDesc?-1:1;
          return 0;
        });
      }

      data.forEach(r=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td data-label="Model">${escapeHtml(r.Model)}</td>
          <td data-label="Compilation Errors">${r.CompilationErrors}</td>
          <td data-label="DL (Deadlock)">${r.Deadlock}</td>
          <td data-label="RC (Race Condition)">${r.RaceCondition}</td>
          <td data-label="SV (Starvation)">${r.Starvation}</td>
          <td data-label="UE (Uncaught Exception)">${r.RuntimeException}</td>
          <td data-label="NEM (No Entry Method)">${r.NoEntryMethod}</td>
          <td data-label="ST (Single Thread)">${r.SingleThread}</td>
          <td data-label="TE (Termination Error)">${r.TerminationError}</td>
        `;
        tbody.appendChild(tr);
      });

      const totalCompilationErrors = data.reduce((sum, r) => sum + r.CompilationErrors, 0);
      const totalDeadlock = data.reduce((sum, r) => sum + r.Deadlock, 0);
      const totalRC = data.reduce((sum, r) => sum + r.RaceCondition, 0);
      const totalStarvation = data.reduce((sum, r) => sum + r.Starvation, 0);
      const totalUE = data.reduce((sum, r) => sum + r.RuntimeException, 0);
      const totalNEM = data.reduce((sum, r) => sum + r.NoEntryMethod, 0);
      const totalST = data.reduce((sum, r) => sum + r.SingleThread, 0);
      const totalTE = data.reduce((sum, r) => sum + r.TerminationError, 0);

      const trTot = document.getElementById('totalsRow');
      trTot.innerHTML = `
        <td>Total</td>
        <td>${totalCompilationErrors}</td>
        <td>${totalDeadlock}</td>
        <td>${totalRC}</td>
        <td>${totalStarvation}</td>
        <td>${totalUE}</td>
        <td>${totalNEM}</td>
        <td>${totalST}</td>
        <td>${totalTE}</td>
      `;
    }

    function escapeHtml(unsafe){ return unsafe.replace(/[&<>\"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;" }[m])); }

    let currentSort = {key:null,desc:false};
    renderRows();

    document.getElementById('search').addEventListener('input', e=>{
      renderRows(e.target.value, currentSort.key, currentSort.desc);
    });

    document.querySelectorAll('th.sortable').forEach(th=>{
      th.addEventListener('click', ()=>{
        const key = th.dataset.key;
        if(currentSort.key === key) currentSort.desc = !currentSort.desc; else {currentSort.key = key; currentSort.desc = false}
        renderRows(document.getElementById('search').value, currentSort.key, currentSort.desc);
      });
    });



    let chart = null;
    function renderChart(){
      const labels = rows.map(r=>r.Model);
      const datasets = [
        {label:'Compilation Errors', data:rows.map(r=>r.CompilationErrors), backgroundColor:'#e91e63'},
        {label:'Deadlock', data:rows.map(r=>r.Deadlock), backgroundColor:'#f44336'},
        {label:'Race Condition', data:rows.map(r=>r.RaceCondition), backgroundColor:'#ff9800'},
        {label:'Starvation', data:rows.map(r=>r.Starvation), backgroundColor:'#ffeb3b'},
        {label:'Uncaught Exception', data:rows.map(r=>r.RuntimeException), backgroundColor:'#2196f3'},
        {label:'No Entry Method', data:rows.map(r=>r.NoEntryMethod), backgroundColor:'#9c27b0'},
        {label:'Single Thread', data:rows.map(r=>r.SingleThread), backgroundColor:'#4caf50'},
        {label:'Termination Error', data:rows.map(r=>r.TerminationError), backgroundColor:'#607d8b'}
      ];
      const ctx = document.getElementById('stackedChart');
      if(chart) chart.destroy();
      chart = new Chart(ctx, {
        type:'bar',
        data:{ labels, datasets },
        options:{
          plugins:{legend:{position:'top'}},
          responsive:true, maintainAspectRatio:false,
          scales: {
            x: { stacked: true, title:{display:false}},
            y: { stacked: true, beginAtZero:true, title:{display:true, text:'Count'} }
          }
        }
      });
    }

    const toggleBtn = document.getElementById('toggleChart');
    const tableWrap = document.getElementById('tableWrap');
    const chartWrap = document.getElementById('chartWrap');
    toggleBtn.addEventListener('click', ()=>{
      if(chartWrap.style.display === 'none'){ chartWrap.style.display='block'; tableWrap.style.display='none'; renderChart(); toggleBtn.textContent='Show Table'; }
      else { chartWrap.style.display='none'; tableWrap.style.display='block'; toggleBtn.textContent='Toggle Chart / Table'; }
    });

    document.addEventListener('keydown', e=>{ if(e.key==='/' && document.activeElement.id!=='search'){ e.preventDefault(); document.getElementById('search').focus(); }});
  </script>
</body>
</html>
